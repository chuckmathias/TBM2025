{% extends "base.html" %}
{% load wagtailcore_tags %}
{% load static %}

{% block content %}
<div class="grid-container">
    <h2 class="text-center">All Missionary Updates</h2>
    <div class="grid-x grid-margin-x align-center">
        {% for update in updates %}
            <div class="cell small-12 medium-4">
                <a href="{{ update.url }}" class="card-link">
                    <div class="update-card">
                        <div class="card-image">
                            {% if update.header_image %}
                                <img src="{{ update.header_image.file.url }}" alt="Missionary Update">
                            {% else %}
                                <img src="{% static 'images/default_update.jpg' %}" alt="Default Update Image">
                            {% endif %}
                        </div>
                        <div class="card-content">
                            <h3>{{ update.title }}</h3>
                            <p class="date">{{ update.date }}</p>
                            <div class="summary">{{ update.summary|richtext }}</div>
                            {% if update.missionary_profile %}
                                <p class="missionary-name"><strong>Missionary:</strong> {{ update.missionary_profile.name }}</p>
                            {% endif %}
                        </div>
                    </div>
                </a>
            </div>
        {% empty %}
            <p class="text-center">No updates available.</p>
        {% endfor %}
    </div>
</div>
{% endblock %}